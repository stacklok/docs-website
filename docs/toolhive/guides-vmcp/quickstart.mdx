---
title: Deploy Virtual MCP Server
description: How to deploy Virtual MCP Server in Kubernetes using the operator.
---

This guide shows you how to aggregate multiple MCP servers using the
VirtualMCPServer custom resource.

## Prerequisites

- Kubernetes cluster with ToolHive operator installed (see
  [Deploy the operator using Helm](../guides-k8s/deploy-operator-helm.mdx))
- `kubectl` configured to communicate with your cluster
- Basic familiarity with Kubernetes resources

## Overview

Deploying Virtual MCP Server involves three steps:

1. Create an MCPGroup to organize your backend servers
2. Deploy MCPServer resources within the group
3. Create a VirtualMCPServer that aggregates the group

## Step 1: Create an MCPGroup

{/* TODO: Add MCPGroup manifest example */}

## Step 2: Deploy backend MCPServers

{/* TODO: Add MCPServer manifests with groupRef */}

## Step 3: Create a VirtualMCPServer

{/* TODO: Add VirtualMCPServer manifest */}

## Step 4: Verify the deployment

{/* TODO: Add kubectl commands to verify status */}

:::info[What's happening?]

When you create a VirtualMCPServer resource, the operator:

1. Validates the MCPGroup reference exists and is ready
2. Discovers all MCPServer backends in the group
3. Creates a ConfigMap with the aggregation configuration
4. Deploys the Virtual MCP server as a Deployment
5. Creates a Service for client access
6. Aggregates tools from all backends with conflict resolution

:::

## Step 5: Connect your client

{/* TODO: Add port-forward and client configuration instructions */}

## Next steps

- [Configure authentication](./authentication.mdx) for production deployments
- [Customize tool aggregation](./tool-aggregation.mdx) with filtering and
  overrides
- [VirtualMCPServer configuration reference](./configuration.mdx)

## Troubleshooting

<details>
<summary>VirtualMCPServer stuck in Pending</summary>

{/* TODO: Add troubleshooting steps */}

Check that the MCPGroup is ready and backend MCPServers are running.

</details>

<details>
<summary>Backends not discovered</summary>

{/* TODO: Add troubleshooting steps */}

Verify MCPServers reference the correct group.

</details>

<details>
<summary>Tools not appearing in client</summary>

{/* TODO: Add troubleshooting steps */}

Check the Virtual MCP server logs for errors.

</details>
