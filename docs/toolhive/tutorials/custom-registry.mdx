---
title: Create a custom MCP registry
description: Learn how to create a custom MCP registry for ToolHive.
---

## Overview

ToolHive includes a built-in registry of MCP servers with verified
configurations that meet a
[minimum quality standard](../concepts/registry-criteria.md).

But you can also create your own custom registry to include the MCP servers that
are relevant to your organization or specific use cases. This allows you to
curate a list of servers that meet your specific needs.

## Why create a custom registry?

Creating a custom registry allows you to:

- Curate a list of MCP servers tailored to your organization's needs
- Include private or internal servers not listed in the public registry
- Pre-configure server settings for easier deployment
- Ensure all servers meet your organization's quality and security standards

## Create your first custom registry

In this tutorial, you'll create a custom MCP registry for ToolHive and configure
it to use your own curated list of MCP servers. By the end, you'll have a
working custom registry that you can extend with your organization's specific
MCP servers.

### What you'll build

You'll create a JSON registry file containing a simple MCP server entry,
configure ToolHive to use your custom registry, and verify it works by listing
and running servers from your registry.

### Prerequisites

Before you start, make sure you have:

- The ToolHive UI or CLI installed and working on your system
  - [ToolHive UI quickstart](./quickstart-ui.mdx)
  - [ToolHive CLI quickstart](./quickstart-cli.mdx)
- Basic familiarity with JSON format
- A text editor for creating the registry file

### Step 1: Create the registry file

First, create a new directory for your custom registry and navigate to it:

```bash
mkdir my-custom-registry
cd my-custom-registry
```

Create a new file called `registry.json` and add the following content:

```json title='registry.json'
{
  "$schema": "https://raw.githubusercontent.com/stacklok/toolhive/main/pkg/registry/data/schema.json",
  "version": "1.0.0",
  "last_updated": "2025-08-15T10:00:00Z",
  "servers": {
    "my-fetch": {
      "description": "A custom web content fetching MCP server for our organization",
      "image": "ghcr.io/stackloklabs/gofetch/server:latest",
      "status": "Active",
      "tier": "Community",
      "transport": "streamable-http",
      "args": ["--user-agent", "Mozilla/5.0 (compatible;MyOrgFetchBot/1.0)"],
      "tags": ["web", "fetch", "content"],
      "tools": ["fetch"],
      "permissions": {
        "network": {
          "outbound": {
            "allow_host": [".example.com", "api.mycompany.com"],
            "allow_port": [80, 443]
          }
        }
      }
    }
  },
  "groups": [
    {
      "name": "dev-toolkit",
      "description": "Essential MCP servers for development workflows",
      "servers": {
        "fetch-tool": {
          "description": "A web content fetching MCP server for development",
          "image": "ghcr.io/stackloklabs/gofetch/server:latest",
          "status": "Active",
          "tier": "Community",
          "transport": "streamable-http",
          "args": ["--user-agent", "Mozilla/5.0 (compatible;DevBot/1.0)"],
          "tags": ["web", "fetch", "dev"],
          "tools": ["fetch"],
          "permissions": {
            "network": {
              "outbound": {
                "allow_host": [".github.com", ".stackoverflow.com"],
                "allow_port": [80, 443]
              }
            }
          }
        }
      }
    }
  ]
}
```

This registry defines:

- A single MCP server called `my-fetch` in the top-level `servers` section
- A group called `dev-toolkit` with its own independent server called
  `fetch-tool`

Groups are optional - you can omit the entire `groups` section if you only need
individual servers. Groups are independent entities that contain their own
complete server definitions. The `dev-toolkit` group includes a `fetch-tool`
server that's similar to the top-level `my-fetch` server but with different
configuration (different user agent, different allowed hosts for development
purposes).

Each server definition includes:

- A description explaining its purpose
- The container image to use
- Required metadata like status and tier
- A list of tools it provides
- Command-line arguments for customization
- Network permissions for security

Groups provide an organizational layer that allows you to run multiple related
servers together as a cohesive unit.

### Step 2: Configure ToolHive to use your registry

Configure ToolHive to use your custom registry.

<Tabs groupId='interface' queryString='interface'>
<TabItem value='ui' label='ToolHive UI' default>

1. Open the ToolHive application
2. Navigate to **Settings** → **Registry**
3. Select the **Local Registry** option
4. Enter the full path to your `registry.json` file (for example:
   `/Users/<YOUR_NAME>/my-custom-registry/registry.json`)
5. Click **Save** to apply the configuration

The UI will validate the registry file and confirm it's been set successfully.

</TabItem>
<TabItem value='cli' label='CLI'>

Set the registry file using the full path:

```bash
thv config set-registry /Users/<YOUR_NAME>/my-custom-registry/registry.json
```

Verify the configuration was applied:

```bash
thv config get-registry
```

You should see the path to your registry file displayed.

</TabItem>
</Tabs>

### Step 3: Test your custom registry

Verify your custom registry is working.

<Tabs groupId='interface' queryString='interface'>
<TabItem value='ui' label='ToolHive UI' default>

1. Navigate to the **Registry** page from the menu bar
2. You should see your `my-fetch` server displayed alongside any other servers
   in your custom registry
3. Click on the server to view its details, including description, tools, and
   configuration options

</TabItem>
<TabItem value='cli' label='CLI'>

List the servers in your custom registry:

```bash
thv registry list
```

You should see your `my-fetch` server listed. Get detailed information about it:

```bash
thv registry info my-fetch
```

This displays the server's configuration, tools, and permissions as defined in
your registry.

</TabItem>
</Tabs>

### Step 4: Run a server from your registry

Finally, run the MCP server from your custom registry.

<Tabs groupId='interface' queryString='interface'>
<TabItem value='ui' label='ToolHive UI' default>

1. On the **Registry** page, click on your `my-fetch` server
2. Click the **Install server** button
3. Configure any required settings (the defaults from your registry will be
   pre-populated)
4. Click **Install server** to start the MCP server
5. Navigate to the **MCP Servers** page to see your running server and manage it

The server will appear in your MCP servers list, where you can start, stop, view
logs, and manage it like any other MCP server.

</TabItem>
<TabItem value='cli' label='CLI'>

```bash
thv run my-fetch
```

The server should start successfully, demonstrating that your custom registry is
working correctly.

You can also run the entire group:

```bash
thv group run dev-toolkit
```

This starts all servers in the `dev-toolkit` group (in this case, just the
`fetch-tool` server).

</TabItem>
</Tabs>

### Step 5: Add more servers (optional)

You can extend your registry by adding more servers to the `servers` object. For
example, add a second server (note this is just an example, it will not function
if you try to run it):

```json title='registry.json'
{
  "$schema": "https://raw.githubusercontent.com/stacklok/toolhive/main/pkg/registry/data/schema.json",
  "version": "1.0.0",
  "last_updated": "2025-08-15T10:00:00Z",
  "servers": {
    "my-fetch": {
      // ... existing server configuration
    },
    "company-tools": {
      "description": "Internal company tools and utilities MCP server",
      "image": "registry.company.com/mcp/company-tools:v1.2.0",
      "status": "Active",
      "tier": "Community",
      "transport": "stdio",
      "tools": ["get_employee_info", "create_ticket", "check_inventory"],
      "tags": ["internal", "company", "tools"],
      "env_vars": [
        {
          "name": "COMPANY_API_KEY",
          "description": "API key for accessing company internal services",
          "required": true,
          "secret": true
        }
      ]
    }
  }
}
```

After updating the file, the new server is immediately available for ToolHive
CLI commands. For the UI, navigate to the registry settings and click **Save**
to see the new server listed.

## Working with groups

Groups allow you to organize related MCP servers and run them together as a
cohesive unit. This is particularly useful for:

- **Team-specific toolkits**: Create groups for different teams (frontend,
  backend, DevOps)
- **Workflow-based organization**: Group servers needed for specific workflows
  (testing, deployment, monitoring)
- **Environment-specific configurations**: Different server configurations for
  development, staging, and production

### Group structure

Groups in your registry have the following structure:

```json
{
  "groups": [
    {
      "name": "group-name",
      "description": "Description of what this group provides",
      "servers": {
        "server-name": {
          // Complete server definition
        }
      },
      "remote_servers": {
        "remote-server-name": {
          // Complete remote server definition
        }
      }
    }
  ]
}
```

### Key characteristics of groups

- **Independent server definitions**: Each group contains complete server
  configurations, not references to top-level servers
- **Self-contained**: Groups can define servers with the same names as top-level
  servers but with different configurations
- **Organizational only**: Groups provide organization but don't affect server
  runtime behavior
- **Flexible membership**: Servers can appear in multiple groups with different
  configurations

### Example: Multi-group registry

Here's a more comprehensive example showing how groups can organize servers for
different purposes:

```json title='advanced-registry.json'
{
  "$schema": "https://raw.githubusercontent.com/stacklok/toolhive/main/pkg/registry/data/schema.json",
  "version": "1.0.0",
  "last_updated": "2025-08-15T10:00:00Z",
  "servers": {
    "production-fetch": {
      "description": "Production web content fetching server",
      "image": "ghcr.io/stackloklabs/gofetch/server:latest",
      "status": "Active",
      "tier": "Community",
      "transport": "streamable-http",
      "permissions": {
        "network": {
          "outbound": {
            "allow_host": [".company.com"],
            "allow_port": [443]
          }
        }
      }
    }
  },
  "groups": [
    {
      "name": "frontend-dev",
      "description": "Tools for frontend development team",
      "servers": {
        "dev-fetch": {
          "description": "Development web content fetching with broader access",
          "image": "ghcr.io/stackloklabs/gofetch/server:latest",
          "status": "Active",
          "tier": "Community",
          "transport": "streamable-http",
          "permissions": {
            "network": {
              "outbound": {
                "allow_host": ["*"],
                "allow_port": [80, 443]
              }
            }
          }
        }
      }
    },
    {
      "name": "testing-suite",
      "description": "Servers needed for automated testing workflows",
      "servers": {
        "test-fetch": {
          "description": "Restricted fetch server for testing",
          "image": "ghcr.io/stackloklabs/gofetch/server:latest",
          "status": "Active",
          "tier": "Community",
          "transport": "streamable-http",
          "args": ["--timeout", "5s"],
          "permissions": {
            "network": {
              "outbound": {
                "allow_host": ["test.example.com"],
                "allow_port": [443]
              }
            }
          }
        }
      }
    }
  ]
}
```

This registry provides:

- A production-ready `production-fetch` server at the top level
- A `frontend-dev` group with a more permissive `dev-fetch` server
- A `testing-suite` group with a restricted `test-fetch` server

Each server has the same base image but different configurations appropriate for
its use case.

### Running groups

You can run entire groups using the group command:

```bash
# Run all servers in the frontend-dev group
thv group run frontend-dev

# Run all servers in the testing-suite group
thv group run testing-suite

# You can also pass environment variables and secrets to group runs
thv group run frontend-dev --env DEV_MODE=true --secret API_KEY=my-secret
```

Groups provide a convenient way to start multiple related servers with a single
command.

## Production considerations

While this tutorial uses a local file for simplicity, in production environments
you should:

- **Host your registry on a secure HTTP server**
- **Use version control** to track changes to your registry
- **Implement proper access controls** to prevent unauthorized modifications
- **Set up automated validation** to ensure registry entries follow the schema
- **Regularly update** the registry with new servers and remove deprecated ones

For production use, configure ToolHive to use a remote registry URL:

```bash
thv config set-registry https://registry.example.com/mcp-registry.json
```

## What you've learned

You've successfully:

- Created a custom MCP registry following the JSON schema
- Configured ToolHive to use your custom registry
- Added MCP servers with proper metadata and permissions
- Created groups to organize related servers
- Tested your registry by listing and running both individual servers and groups

You can now maintain your own curated list of MCP servers and groups tailored to
your organization's needs. The registry can include both public servers from
container registries and private servers hosted within your organization,
organized into logical groups for different teams or workflows.

## Next steps

- Explore the full [schema reference](../reference/registry-schema.mdx) to
  understand all available configuration options
- Learn about [custom permissions](../guides-cli/custom-permissions.mdx) for
  fine-grained security control
- Set up [secrets management](../guides-cli/secrets-management.mdx) for servers
  requiring API keys

## Cleanup: Revert to the default registry

If you want to switch back to using ToolHive's built-in registry after
completing this tutorial, you can easily revert your configuration.

<Tabs groupId='interface' queryString='interface'>
<TabItem value='ui' label='ToolHive UI' default>

To revert to the default registry through the UI:

1. Navigate to **Settings** → **Registry**
2. Select the **Default Registry** option
3. Click **Save** to apply the configuration

The UI will confirm that you're now using the built-in ToolHive registry.

</TabItem>
<TabItem value='cli' label='CLI'>

To revert to the default registry using the CLI:

```bash
thv config unset-registry
```

Verify that you're back to using the default registry:

```bash
thv config get-registry
```

You should see a message indicating that the built-in registry is being used.

</TabItem>
</Tabs>

After reverting, all registry commands
([`thv registry list`](../reference/cli/thv_registry_list.md),
[`thv registry info`](../reference/cli/thv_registry_info.md),
[`thv search`](../reference/cli/thv_search.md)) will use ToolHive's built-in
registry instead of your custom one.
